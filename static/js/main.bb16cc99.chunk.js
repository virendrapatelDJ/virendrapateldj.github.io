(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{13:function(e,t,n){var c=n(297).default,a=n(53).getToken,r=c.create({baseURL:"https://13.233.6.68:3000"});r.interceptors.request.use((function(e){return e.headers.authorization=a(),e})),r.interceptors.request.use((function(e){return console.log("Connecting at",e.baseURL+e.url),e})),r.interceptors.response.use((function(e){return console.log("Interceptor",e.data),e})),e.exports={axios:r}},285:function(e,t,n){},325:function(e,t,n){},367:function(e,t){},369:function(e,t){},397:function(e,t){},399:function(e,t){},432:function(e,t,n){"use strict";n.r(t);n(264),n(265);var c=n(240),a=n.n(c),r=n(1),i=n.n(r),s=n(32),o=n.n(s),l=n(3),j=n(8),d=n(47),b=n(19),u=(n(284),n(285),n(0)),O=function(){var e={backgroundColor:"#2b542c"},t=Object(r.useContext)(_e),n=t.onLogout,c=t.loggedInUser,a=Object(r.useState)(!1),i=Object(j.a)(a,2),s=i[0],o=i[1],l=Object(b.g)();Object(r.useEffect)((function(){o(c&&"ADMIN"===c.type)}),[c]);return Object(u.jsx)("nav",{style:e,className:"navbar navbar-expand-lg navbar-dark",children:Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsx)(d.b,{className:"navbar-brand",to:"/",children:Object(u.jsx)("img",{src:"/images/logo.jpeg",alt:"logo",height:"40"})}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(u.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(d.b,{className:"nav-link active",to:"/",children:"Home"})}),s&&Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(d.b,{className:"nav-link ",to:"/dashboard",children:"Dashboard"})}),c?Object(u.jsx)("li",{className:"nav-item",onClick:function(){localStorage.clear(),n(),l.push("/login")},children:Object(u.jsx)("a",{className:"nav-link",href:"#",children:"Logout"})}):Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(d.b,{className:"nav-link ",to:"/login",children:"Login"})})]})})]})})},h=function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)(O,{}),e.children]})},x=n(457),v=n(250),m=n(461),p=n(178),f=n(449),g=function(e){var t=e.dashBoardCardOptions,n=e.onCardClick,c=t;return Object(u.jsxs)("div",{className:"conatiner",children:[Object(u.jsxs)("div",{className:"text-center mt-4 col-lg-7 mx-auto",children:[Object(u.jsx)("h1",{className:"display-6",children:"Welcome to Dashboard"}),Object(u.jsx)(f.a,{})]}),Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("div",{className:"mt-4 row",children:c.map((function(e,t){var c=e.title,a=e.url,r=e.icon;return Object(u.jsx)("div",{className:"mx-auto  col-lg-3 col-md-4 col-sm-4 col-4",children:Object(u.jsx)("div",{className:"mt-4 ",children:Object(u.jsxs)(x.a,{className:"mx-auto",onClick:function(){return n(a)},children:[Object(u.jsx)(v.a,{src:r,wrapped:!0,ui:!1,className:"p-4"}),Object(u.jsxs)(x.a.Content,{children:[Object(u.jsxs)(x.a.Header,{children:[Object(u.jsx)(m.a,{style:{fontSize:"1.3em"},className:"text-center d-none d-sm-block",children:Object(u.jsx)("span",{children:c})}),Object(u.jsx)(m.a,{style:{fontSize:"0.8em"},className:"text-center mt-4 d-block d-sm-none",children:Object(u.jsx)("span",{children:c})})]}),Object(u.jsx)(x.a.Meta,{children:Object(u.jsx)("span",{hidden:!0,className:"date",children:"Joined in 2015"})}),Object(u.jsx)(x.a.Description,{})]})]})})},t)}))})})]})},S=n(176),N=n(455),C=n(459),w=n(13),D=function(){return w.axios.get("/api/drives").then((function(e){var t=e.data;return t&&t.drives}))},y=n(451),k=function(e){var t=e.show,n=e.title,c=e.positiveAction,a=e.positiveActionHandler,r=e.negativeAction,i=e.negativeActionHandler,s=e.children;return Object(u.jsx)("div",{children:Object(u.jsxs)(y.a,{show:t,children:[Object(u.jsx)(y.a.Header,{closeButton:!0,children:Object(u.jsx)(y.a.Title,{children:n})}),Object(u.jsx)(y.a.Body,{children:s}),Object(u.jsxs)(y.a.Footer,{children:[Object(u.jsx)(C.a,{className:"m-3",color:"red",onClick:a,children:c||"Ok"}),Object(u.jsx)(C.a,{className:"m-3",color:"green",onClick:i,children:r||"Cancel"})]})]})})},E=n(12),A=function(){return w.axios.get("/api/groups/").then((function(e){return e.data&&e.data.groups}))},F=function(e){return e<10?"0".concat(e):e},_=function(){var e=new Date;return T(e)},T=function(e){if(!(e=new Date(e)).getTime())return null;var t=e.getFullYear(),n=F(e.getMonth()+1),c=F(e.getDate());return"".concat(t,"-").concat(n,"-").concat(c)},I=function(){var e=new Date,t=e.getHours(),n=e.getMinutes();return"".concat(F(t),":").concat(F(n))},H=function(e,t){return e<0&&t<0||!e||!t?null:new Date(0,0,0,e,t,0,0).toLocaleTimeString("en-us",{hour12:!0,hour:"2-digit",minute:"2-digit"})},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(!t)return e;var n=[];for(var c in t)n.push([c,t[c]]);var a=new URLSearchParams(n).toString(),r="?";return(e.includes("?")||e.includes("&"))&&(r="&"),"".concat(e).concat(r).concat(a)},L=function(e){var t=R("/api/robins/",e);return w.axios.get(t).then((function(e){return e.data&&e.data.robins}))},P=function(e){var t={backgroundColor:"#2b542c",color:"white"};return Object(u.jsx)("button",Object(l.a)(Object(l.a)({className:"ui button",style:t},e),{},{children:e.children}))},B=function(e){var t=e.show,n=e.button,c=e.title,a=e.children,r=e.onOk,i=e.isError;return Object(u.jsxs)(y.a,{show:t,children:[Object(u.jsx)(y.a.Header,{children:Object(u.jsxs)(y.a.Title,{children:[c||"Message"," ",i&&Object(u.jsx)("img",{height:"30px",src:"/icons/cancel.png",alt:""}),!i&&Object(u.jsx)("img",{height:"30px",src:"/icons/info.png",alt:""})]})}),Object(u.jsx)(y.a.Body,{children:a||"please add body to Modal."}),Object(u.jsx)(y.a.Footer,{children:Object(u.jsx)(P,{onClick:r,children:n||"Ok"})})]})},q=n(450),M=function(e){var t=e.onViewChange,n=e.onShowFilterModal,c=e.onBulkOptionChange,a=e.performBulkAction,r=e.bulkOptions;return Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-lg-4 mt-2",children:Object(u.jsxs)(C.a.Group,{children:[Object(u.jsx)(C.a,{color:"teal",onClick:function(){return t("table")},children:"Table"}),Object(u.jsx)(C.a,{color:"blue",onClick:function(){return t("cards")},children:"Cards"}),Object(u.jsx)(C.a,{color:"google plus",onClick:n,children:"Show Filters"})]})}),Object(u.jsxs)("div",{className:"ml-2 mt-2 col",children:[Object(u.jsx)(q.a,{onChange:c,placeholder:"Select An Action",options:r}),"   ",Object(u.jsx)(C.a,{onClick:a,color:"green",children:"Done"})]})]})},G=function(e){var t=e.show,n=e.onHide;return Object(u.jsx)(r.Fragment,{children:Object(u.jsxs)(y.a,{show:t,children:[Object(u.jsx)(y.a.Header,{children:Object(u.jsx)(y.a.Title,{children:"Pending Work \u231b\ufe0f"})}),Object(u.jsx)(y.a.Body,{children:Object(u.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore tempora, repellendus autem dolore, expedita id hic perspiciatis architecto odio, sequi et consequatur cumque natus alias. Similique ut illo natus veritatis."})}),Object(u.jsx)(y.a.Footer,{children:Object(u.jsx)(P,{onClick:n,children:"Filter"})})]})})},U=n(21),W=n.n(U),z=n(462),V=function(e){var t=e.onClick,n=e.onSelect,c=Object(r.useContext)(Z);return Object(u.jsx)(r.Fragment,{children:Object(u.jsx)("div",{className:"row",children:c.map((function(e,a){var r=e.selected,i=e.robin,s=i.email,o=i._id,l=i.firstName,j=i.lastName,d=i.phone,b=i.createdAt;return Object(u.jsx)("div",{onClick:function(){return t(c[a])},className:"col-lg-3 col-md-4 col-sm-5 col-11 mx-auto mt-3",children:Object(u.jsx)("div",{className:"card",children:Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"float-end",onClick:function(){return n(a)},children:Object(u.jsx)(p.a,{compact:!0,children:Object(u.jsx)(z.a,{className:"mr-4",checked:r})})})}),Object(u.jsx)("div",{className:"",children:Object(u.jsxs)("h5",{className:"card-title",children:[Object(U.toTitleCase)(l)," ",Object(U.toTitleCase)(j)]})}),Object(u.jsxs)("p",{className:"card-text",children:[Object(u.jsx)("span",{children:Object(U.toTitleCase)(s)}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{children:Object(U.toTitleCase)(d)}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{children:new Date(b).toDateString()})]})]})})},o)}))})})},J=function(e){var t=Object(r.useContext)(Z),n=e.onClick,c=e.onSelect,a=function(e,c){e.stopPropagation(),n(t[c])},i=", Sno.,Name, Email , Phone, Type , Group , Created At".split(",").map((function(e){return e.trim()})).map((function(e,t){return Object(u.jsx)("th",{children:e},t)})),s=t.map((function(e,t){var n=e.selected,i=e.robin,s=(i.id,i.firstName),o=i.type,l=i.lastName,j=i.email,d=i.group,b=i.phone,O=i.createdAt;return Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)("td",{onClick:function(){return c(t)},children:Object(u.jsx)(z.a,{checked:n})}),Object(u.jsx)("td",{onClick:function(e){return a(e,t)},children:t+1}),Object(u.jsx)("td",{onClick:function(e){return a(e,t)},children:"".concat(s," ").concat(l)}),Object(u.jsx)("td",{onClick:function(e){return a(e,t)},children:j}),Object(u.jsx)("td",{onClick:function(e){return a(e,t)},children:b}),Object(u.jsx)("td",{onClick:function(e){return a(e,t)},children:o}),Object(u.jsx)("td",{onClick:function(e){return a(e,t)},children:d?d.title:"No-Group"}),Object(u.jsx)("td",{onClick:function(e){return a(e,t)},children:new Date(O).toDateString()})]},t)}));return s=s.map((function(e,t){return Object(u.jsx)("tr",{children:e},t)})),Object(u.jsx)("div",{className:"table-responsive",children:Object(u.jsxs)("table",{style:{cursor:"pointer"},className:"table table-hover table-striped table-bordered",children:[Object(u.jsx)("thead",{children:Object(u.jsx)("tr",{children:i})}),Object(u.jsx)("tbody",{children:s})]})})},Y=function(e){var t=e.view,n=e.onSelect,c=e.onClick;return{table:Object(u.jsx)(J,{onSelect:n,onClick:c}),cards:Object(u.jsx)(V,{onSelect:n,onClick:c})}[t]},Z=i.a.createContext(),$=n(14),K=n(453),Q=n(452),X=n(67),ee=function(e){var t=e.onDelete,n=e.groups;return Object(u.jsx)(r.Fragment,{children:Object(u.jsx)("div",{className:"container mt-3",children:Object(u.jsxs)("table",{className:"table table-striped table-hover",children:[Object(u.jsx)("thead",{className:"table-light",children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"#"}),Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{children:"Slug"}),Object(u.jsx)("th",{children:"Created At"}),Object(u.jsx)("th",{children:"Actions"})]})}),Object(u.jsx)("tbody",{children:n.map((function(e,n){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:n+1}),Object(u.jsx)("td",{children:e.title}),Object(u.jsx)("td",{children:e.slug}),Object(u.jsx)("td",{children:new Date(e.createdAt).toDateString()}),Object(u.jsx)("td",{children:Object(u.jsx)(X.a,{color:"red",onClick:function(){return t(e)},name:"trash",className:"hand"})})]},e._id)}))})]})})})},te=function(){var e=Object(r.useState)({title:""}),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(u.jsx)(r.Fragment,{children:Object(u.jsx)("div",{className:"container mt-3",children:Object(u.jsx)("div",{className:"conatiner p-4",children:Object(u.jsx)("div",{className:"mt-4",children:Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"display-6",children:"Add New Group"}),Object(u.jsx)(f.a,{})]}),Object(u.jsxs)(K.a,{onSubmit:function(){(function(e){return w.axios.post("/api/groups/",e).then((function(e){return e.data&&e.data.group}))})(n).then((function(e){alert("Group Created."),c({title:""})}))},children:[Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:"Group Name"}),Object(u.jsx)("input",{required:!0,placeholder:"Name",onChange:function(e){console.log("group"),c(Object($.a)({},e.target.name,e.target.value))},value:n.title,name:"title"})]}),Object(u.jsx)("br",{}),Object(u.jsx)(P,{type:"submit",children:"Save group"})]})]})})})})})})},ne=n(458),ce=function(e){var t=R("/api/events/",e);return w.axios.get(t).then((function(e){return e.data&&e.data.events}))},ae=function(){return w.axios.get("/api/events/upcoming/").then((function(e){return e.data&&e.data.events}))},re=function(e){var t=e.robins,n=e.drives,c=e.onMarkAttendance,a=e.attendances,r=function(e,t){if(!a)return!1;var n=a.find((function(e){return e.robin===t._id})),c=!1;return n&&(c=n[e._id]),!!c};return t.length<1?Object(u.jsx)(ne.a,{info:!0,children:Object(u.jsx)("h1",{className:"text-center",children:"No Robins In Selected Group"})}):Object(u.jsx)("div",{className:"border rounded",children:Object(u.jsxs)(N.a,{celled:!0,padded:!0,children:[Object(u.jsx)(N.a.Header,{children:Object(u.jsxs)(N.a.Row,{children:[Object(u.jsx)(N.a.HeaderCell,{children:"#"}),Object(u.jsx)(N.a.HeaderCell,{children:"Name"}),Object(u.jsx)(N.a.HeaderCell,{children:"Email"}),Object(u.jsx)(N.a.HeaderCell,{children:"Phone"}),Object(u.jsx)(N.a.HeaderCell,{children:"Group"}),n.map((function(e){return Object(u.jsx)(N.a.HeaderCell,{children:e.drive},e._id)}))]})}),Object(u.jsx)(N.a.Body,{children:t.map((function(e,t){var a;return Object(u.jsxs)(N.a.Row,{children:[Object(u.jsx)(N.a.Cell,{children:t+1}),Object(u.jsx)(N.a.Cell,{children:W()("".concat(e.firstName," ").concat(e.lastName))}),Object(u.jsx)(N.a.Cell,{children:e.email}),Object(u.jsx)(N.a.Cell,{children:e.phone}),Object(u.jsx)(N.a.Cell,{children:W()(e.group?"".concat(null===e||void 0===e||null===(a=e.group)||void 0===a?void 0:a.title):"No-group")}),n.map((function(n){return Object(u.jsx)(N.a.Cell,{children:Object(u.jsx)(z.a,{checked:r(n,e),onChange:function(a,r){return c({event:a,data:r,drive:n,robin:e,index:t})},toggle:!0})},n._id)}))]},e._id)}))})]})})},ie=function(e){var t=e.groups,n=e.onGroupSelect,c=e.onShowEventSelector,a=[{key:-1,text:"Select Group",value:"-1",selected:!0}].concat(Object(E.a)(t.map((function(e,t){return{key:t,text:e.title,value:e._id}})))),i=Object(r.useState)("-1"),s=Object(j.a)(i,2),o=s[0],l=s[1];return Object(u.jsx)("div",{className:"border rounded p-2",children:Object(u.jsxs)("div",{class:"d-flex flex-wrap",children:[Object(u.jsx)("div",{class:"mx-3",children:Object(u.jsx)("div",{className:"",children:Object(u.jsx)("div",{className:"mt-4 mb-4",children:Object(u.jsx)(P,{onClick:c,children:"Select Event"})})})}),Object(u.jsx)("div",{class:"mx-3",children:Object(u.jsx)(K.a,{className:"col",children:Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:"Select Group"}),Object(u.jsx)(q.a,{onChange:function(e,t){var c=t.value;l(c),n(e,{value:c})},name:"select",options:a,value:o})]})})})]})})},se=n(456),oe=function(e){var t=e.events,n=e.onSelect,c=e.show,a=e.onClose,i=e.selectedEvent,s=e.onEventFilterChange,o=Object(r.useState)(_(new Date)),l=Object(j.a)(o,2),d=l[0],b=l[1],O=Object(r.useState)(""),h=Object(j.a)(O,2),x=h[0],m=h[1];return Object(u.jsxs)(y.a,{show:c,children:[Object(u.jsx)(y.a.Header,{children:Object(u.jsx)(y.a.Title,{children:Object(u.jsx)("h2",{children:"Select An Event"})})}),Object(u.jsxs)(y.a.Body,{children:[x?Object(u.jsx)(ne.a,{error:!0,children:x}):Object(u.jsxs)(ne.a,{info:!0,children:["Showing Events Of ",new Date(d).toLocaleDateString()," "]}),Object(u.jsx)(K.a,{children:Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:"Select Date"}),Object(u.jsx)("input",{onChange:function(e){var t=e.target,n=(t.name,t.value),c=new Date(n);isNaN(c.getTime())?m("Invalid Date"):(b(n),m(""),s({date:n}))},value:d,type:"date"})]})}),t.length?Object(u.jsx)(se.a,{celled:!0,children:t.map((function(e,t){return Object(u.jsxs)(se.a.Item,{className:"hand",style:{backgroundColor:i===e?"#f0eee9":""},onClick:function(){return n(e)},children:[Object(u.jsx)(v.a,{avatar:!0,src:"/icons/event.png"}),Object(u.jsxs)(se.a.Content,{children:[Object(u.jsxs)(se.a.Header,{children:[new Date(e.date).toDateString()," ",H(e.time.hr,e.time.min)]}),W()(e.title),Object(u.jsx)("br",{}),W()(e.location)]})]},t)}))}):Object(u.jsx)(ne.a,{warning:!0,children:Object(u.jsxs)("h3",{children:["No Events Scheduled On ",d]})})]}),Object(u.jsx)(y.a.Footer,{children:Object(u.jsx)(P,{onClick:a,children:"Close"})})]})},le=n(103),je=n(454);function de(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e}),[e]),t.current}var be=i.a.createContext();var ue=function(e){var t=e.report,n=Object(r.useContext)(be),c=n.drives,a=(n.robins,Object(r.useState)([])),i=Object(j.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)("Sno.,Event,Robin".split(",").map((function(e){return e.trim()}))),d=Object(j.a)(l,2),b=d[0],O=d[1];return Object(r.useEffect)((function(){O([].concat(Object(E.a)(b),Object(E.a)(c.map((function(e){return e.drive})))))}),[c]),Object(r.useEffect)((function(){if(t){var e=t.map((function(e,t){var n=e.event,a=e.robin,r=a.firstName,i=a.lastName,s=n||{},o=s.date,l=s.time,j=s.location,d=l||{},b=d.hr,O=d.min,h=[t+1,Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{className:"m-0",children:[Object(u.jsx)("span",{className:"p-2",children:"\ud83d\udcc5"})," ",T(o)||"-"]}),Object(u.jsxs)("p",{className:"m-0",children:[Object(u.jsx)("span",{className:"p-2",children:"\ud83d\udd52"})," ",H(b,O)||"-"]}),Object(u.jsxs)("p",{className:"m-0",children:[Object(u.jsx)("span",{className:"p-2",children:"\ud83d\udccd"})," ",W()(j)]})]}),"".concat(r||"-"," ").concat(i||"")];return c.forEach((function(t){h.push(function(e,t,n){var c;return!!e.attendanceInfo&&(null===(c=e.attendanceInfo.find((function(e){return e.drive._id==n._id})))||void 0===c?void 0:c.isPresent)}(e,0,t)?Object(u.jsx)("p",{className:"text-center",children:"\u2705"}):Object(u.jsx)("p",{className:"text-center",children:"\u274c"}))})),h}));o(e)}}),[t]),Object(u.jsx)("section",{id:"table",className:"mt-3",children:Object(u.jsx)("div",{className:"table-responsive",children:Object(u.jsxs)("table",{style:{verticalAlign:"middle"},className:"table table-hover table-bordered table-striped table-light",children:[Object(u.jsx)("thead",{children:Object(u.jsx)("tr",{children:b.map((function(e){return Object(u.jsx)("th",{children:e},e)}))})}),Object(u.jsx)("tbody",{children:s.map((function(e,t){return Object(u.jsx)("tr",{children:e.map((function(e,n){return Object(u.jsx)("td",{children:e},t+""+n)}))},t)}))})]})})})};function Oe(){var e={_id:""},t=(Object(r.useContext)(Te).drives,Object(r.useContext)(be).robins),n=Object(r.useState)([]),c=Object(j.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),o=Object(j.a)(s,2),d=o[0],b=o[1],O=Object(r.useState)([]),h=Object(j.a)(O,2),x=h[0],v=h[1],m=Object(r.useState)(e),p=Object(j.a)(m,2),f=p[0],g=p[1],S=Object(r.useState)({_id:""}),N=Object(j.a)(S,2),C=N[0],D=N[1],y=Object(r.useState)({date:T(Object(je.a)(new Date,{days:4}))}),k=Object(j.a)(y,2),E=k[0],A=k[1],F=Object(r.useState)({}),_=Object(j.a)(F,2),I=_[0],R=_[1],L=de(E),P=de(I);Object(r.useEffect)((function(){Object(le.isEqual)(L,E)||ce(E).then((function(e){console.log({events:e}),i(e)}))}),[E]),Object(r.useEffect)((function(){console.log("Report Changed..");var t=d.map((function(t){return Object(l.a)(Object(l.a)({},t),{},{event:Object(le.isEqual)(f,e)?t.event:f})})).sort((function(e,t){var n=e.event,c=t.event;return new Date(c.date).getTime()-new Date(n.date).getTime()}));v(t),console.log({transformed:t})}),[d]),Object(r.useEffect)((function(){Object(le.isEqual)(P,I)||Object(le.isEmpty)(I)||(console.log("USE EFFECT ROBIN EVENT"),function(e){var t="/api/reports/attendance?".concat(new URLSearchParams(e).toString());return w.axios.get(t).then((function(e){return e&&e.data?e.data.report:[]}))}(I).then((function(e){b(e)})))}),[I]);var B=function(e){return"".concat(new Date(e.date).toDateString()," ").concat(H(e.time.hr,e.time.min))};return Object(u.jsxs)("section",{children:[Object(u.jsx)("h1",{children:"Attendance Report "}),Object(u.jsxs)(K.a,{className:"row",children:[Object(u.jsx)("div",{className:"mt-3 col",children:Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:"Select Date"}),Object(u.jsx)("input",{type:"date",name:"date",value:E.date,onChange:function(e){var t=e.target,n=t.name,c=t.value;console.log({name:n,value:c});var a=Object(l.a)(Object(l.a)({},E),{},Object($.a)({},n,c));A(a)}})]})}),Object(u.jsx)("div",{className:"mt-3 col",children:Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:"Select Robin"}),Object(u.jsxs)("select",{value:C._id,onChange:function(e){var n=e.target,c=(n.name,n.value);if(c){var a=t.find((function(e){return e._id===c}));D(a)}else D({_id:""});R(Object(l.a)(Object(l.a)({},I),{},{robin:c}))},name:"robin",id:"robin",children:[Object(u.jsx)("option",{value:"",children:"Select Robin"}),t.map((function(e){var t=e._id,n=e.firstName,c=e.lastName;return Object(u.jsx)("option",{value:t,children:"".concat(n," ").concat(c)},t)}))]})]})}),Object(u.jsx)("div",{className:"mt-3 col",children:Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:"Select Date"}),Object(u.jsxs)("select",{value:f._id,onChange:function(e){var t=e.target,n=(t.name,t.value);if(n){var c=a.find((function(e){return e._id===n}));g(c)}else g({_id:""});R(Object(l.a)(Object(l.a)({},I),{},{event:n}))},name:"event",id:"event",children:[Object(u.jsx)("option",{value:"",children:"Select Event"}),a.map((function(e){return Object(u.jsx)("option",{value:e._id,children:B(e)},e._id)}))]})]})})]}),!f._id&&!C._id&&Object(u.jsx)(ne.a,{color:"blue",children:Object(u.jsx)("h4",{children:"Select Robin or Event !"})}),Object(u.jsx)(ue,{report:x})]})}function he(){return Object(u.jsx)("section",{children:Object(u.jsx)("h1",{children:"Drive Report "})})}var xe=n(249),ve=function(e){var t=e.events,n=Object(r.useContext)(ge).handleEventWhatsAppShare;return Object(u.jsx)("div",{className:"table-responsive",children:Object(u.jsxs)("table",{className:"table table-striped",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{scope:"col",children:"#"}),Object(u.jsx)("th",{scope:"col",children:"Date"}),Object(u.jsx)("th",{scope:"col",children:"Time"}),Object(u.jsx)("th",{scope:"col",children:"Created By"}),Object(u.jsx)("th",{scope:"col",children:"Locations"}),Object(u.jsx)("th",{scope:"col",children:"Actions"})]})}),Object(u.jsx)("tbody",{children:t.map((function(e,t){var c;return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t+1}),Object(u.jsx)("td",{children:new Date(e.date).toDateString()}),Object(u.jsx)("td",{children:H(e.time.hr,e.time.min)}),Object(u.jsx)("td",{children:Object(U.toTitleCase)(null===(c=e.createdBy)||void 0===c?void 0:c.firstName)}),Object(u.jsx)("td",{children:Object(U.toTitleCase)(e.location)}),Object(u.jsx)("td",{children:Object(u.jsx)(X.a,{onClick:function(){return n(e)},name:"whatsapp",color:"green",size:"large",link:!0})})]},e._id)}))})]})})},me=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){w.axios.get("/api/events/done/").then((function(e){return e.data&&e.data.events})).then((function(e){c(e)}))}),[]),Object(u.jsx)("div",{children:Object(u.jsx)(ve,{events:n})})},pe=function(e){e.drives;var t={title:"",description:"",location:"",date:_(),time:I()},n=Object(r.useState)(Object(l.a)({},t)),c=Object(j.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(!1),o=Object(j.a)(s,2),d=o[0],b=o[1];Object(r.useEffect)((function(){d&&(console.log("Message Showing..."),setTimeout((function(){return b(!1)}),3e3))}),[d]);var O=function(e,t){var n=e.target,c=n.name,r=n.value;if(console.log(c,r,t),t){var s=t.value,o=t.name;i(Object(l.a)(Object(l.a)({},a),{},Object($.a)({},o,s)))}else i(Object(l.a)(Object(l.a)({},a),{},Object($.a)({},c,r)))};return Object(u.jsxs)("div",{className:"col-lg-6 mx-auto m-4",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"display-6 p-0 m-0",children:"Schedule A Drive"}),Object(u.jsx)(f.a,{})]}),d&&Object(u.jsx)("p",{className:"alert alert-success border",children:"Event Scheduled."}),Object(u.jsx)("div",{className:"mt-4",children:Object(u.jsxs)(K.a,{className:"",onSubmit:function(){console.log(a);var e=a.time;2!==e.split(":").length&&alert("Time Invalid");var n=+e.split(":")[0],c=+e.split(":")[1],r=Object(l.a)(Object(l.a)({},a),{},{time:{hr:n,min:c}});console.log(r),function(e){return w.axios.post("/api/events/",Object(l.a)({},e)).then((function(e){return e.data&&e.data.event}))}(r).then((function(e){console.log({created:e}),i(t),b(!0)}))},children:[Object(u.jsx)(K.a.Input,{onChange:O,fluid:!0,label:"Title",placeholder:"Title Of Event",name:"title",value:a.title}),Object(u.jsx)(K.a.TextArea,{onChange:O,label:"Description",placeholder:"Description Of Event",name:"description",value:a.description}),Object(u.jsx)(K.a.TextArea,{onChange:O,label:"Location",name:"location",required:!0,placeholder:"Location",value:a.location}),Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:"Date"}),Object(u.jsx)("input",{onChange:O,type:"date",required:!0,value:a.date,name:"date"})]}),Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:"Time"}),Object(u.jsx)("input",{onChange:O,type:"time",required:!0,value:a.time,name:"time"})]}),Object(u.jsx)("div",{className:"mt-4",children:Object(u.jsx)(K.a.Field,{onChange:O,children:Object(u.jsx)(P,{type:"submit",children:" Schedule Drive"})})})]})})]})},fe=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){ae().then((function(e){c(e)}))}),[]),Object(u.jsx)("div",{children:Object(u.jsx)(ve,{events:n})})},ge=i.a.createContext({}),Se=[{title:"Schedule Drive",url:"/dashboard/schedule-drive",icon:"/icons/schedule.png",Component:function(e){var t,n,c=Object(r.useState)([]),a=Object(j.a)(c,2),i=a[0],s=a[1],o=null===(t=window)||void 0===t||null===(n=t.location)||void 0===n?void 0:n.origin;Object(r.useEffect)((function(){D().then((function(e){console.log(e),s(Object(E.a)(e))}))}),[]);var l=[{menuItem:"Schedule",render:function(){return Object(u.jsx)(Q.a.Pane,{attached:!1,children:Object(u.jsx)(pe,{drives:i})})}},{menuItem:"Upcoming",render:function(){return Object(u.jsx)(Q.a.Pane,{attached:!1,children:Object(u.jsx)(fe,{})})}},{menuItem:"Done",render:function(){return Object(u.jsx)(Q.a.Pane,{attached:!1,children:Object(u.jsx)(me,{})})}}],d={drives:i,handleEventWhatsAppShare:function(e){console.log("Sharing On WhatsApp"),console.log({event:e});var t=["A Drive is Scheduled \ud83d\ude4c","*\ud83d\udcc5 Date:* ".concat(new Date(e.date).toDateString()),"*\u23f1\ufe0f Time:* ".concat(H(e.time.hr,e.time.min)),"*\ud83d\udccd Location:* ".concat(e.location),"*\ud83d\udc64 Scheduled By:* ".concat(e.createdBy.firstName," ").concat(e.createdBy.lastName)].map((function(e){return Object(U.toTitleCase)(e)})).concat(["For More Visit: ".concat(o)]).join("\n"),n=new URLSearchParams({text:t}).toString(),c="https://api.whatsapp.com/send?".concat(n);window.open(c,"_black")}};return Object(u.jsx)("div",{className:"mt-3 mx-auto",children:Object(u.jsx)(ge.Provider,{value:d,children:Object(u.jsx)(Q.a,{menu:{secondary:!0,pointing:!0},panes:l})})})}},{title:"Mark Attendence",url:"/dashboard/mark-attendence",icon:"/icons/attendance.png",Component:function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),i=Object(j.a)(a,2),s=i[0],o=i[1],d=Object(r.useState)([]),b=Object(j.a)(d,2),O=(b[0],b[1],Object(r.useState)([])),h=Object(j.a)(O,2),x=h[0],v=h[1],m=Object(r.useState)([]),p=Object(j.a)(m,2),f=p[0],g=p[1],S=Object(r.useState)(!1),N=Object(j.a)(S,2),C=N[0],y=N[1],k=Object(r.useState)(null),F=Object(j.a)(k,2),_=F[0],T=F[1],I=Object(r.useState)({}),R=Object(j.a)(I,2),P=R[0],B=R[1],q=Object(r.useState)([]),M=Object(j.a)(q,2),G=M[0],U=M[1],z=Object(r.useState)({}),V=Object(j.a)(z,2),J=V[0],Y=V[1];Object(r.useEffect)((function(){var e;_&&(e=_._id,w.axios.get("/api/attendances/event/".concat(e)).then((function(e){var t=e.data;return t&&t.attendances}))).then((function(e){U(e)}))}),[_]),Object(r.useEffect)((function(){console.log({filters:P}),L(P).then((function(e){o(e||[])}))}),[P]),Object(r.useEffect)((function(){A().then((function(e){v(e)})),D().then((function(e){c(e)}))}),[]),Object(r.useEffect)((function(){ce(J).then((function(e){g(e)}))}),[J]);var Z=function(e){T(e),y(!1)},K=function(e,t){var n=t.value,c=Object(l.a)({},P);n?c.group=n:delete c.group,B(c)},Q=function(e){Y(Object(l.a)(Object(l.a)({},J),e))},X=function(e){e.event;var t=e.data,n=e.drive,c=e.robin;e.index;if(_){var a,r=t.checked;(a={checked:r,drive:n._id,robin:c._id,event:_._id},console.log({attendanceData:a}),w.axios.post("/api/attendances/",a).then((function(e){var t=e.data;return t&&t.attendance}))).then((function(e){var t,a=G.find((function(e){return e.robin===c._id})),i=Object(E.a)(G);a?a[n._id]=r:i.push((t={},Object($.a)(t,n._id,r),Object($.a)(t,"robin",c._id),Object($.a)(t,"event",_._id),t));U(i)})).catch((function(e){console.error(e)}))}else alert("select an event first ")};return Object(u.jsx)(r.Fragment,{children:Object(u.jsxs)("div",{className:"m-4",children:[Object(u.jsx)(ie,{onShowEventSelector:y,onGroupSelect:K,groups:x}),_?Object(u.jsx)(ne.a,{success:!0,size:"large",children:Object(u.jsx)(ne.a.Header,{children:Object(u.jsxs)("p",{children:[W()("Marking Attendance Of Event Which is/was on"),Object(u.jsx)("b",{children:" ".concat(new Date(_.date).toDateString()," ").concat(H(_.time.hr,_.time.min))})]})})}):Object(u.jsx)(ne.a,{warning:!0,size:"large",children:Object(u.jsx)(ne.a.Header,{children:Object(u.jsx)("p",{children:W()("please Select An Event to mark attendance ! Click on Select event to continue")})})}),Object(u.jsx)(oe,{selectedEvent:_,show:C,onSelect:Z,events:f,onClose:function(){return y(!1)},onEventFilterChange:Q}),_&&Object(u.jsx)(re,{onMarkAttendance:X,drives:n,robins:s,attendances:G})]})})}},{title:"Report",url:"/dashboard/reports",icon:"/icons/report.png",Component:function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(r.useContext)(Te).drives;return Object(r.useEffect)((function(){L().then((function(e){console.log({robins:e}),c(e||[])}))}),[]),Object(u.jsx)(r.Fragment,{children:Object(u.jsx)(be.Provider,{value:{drives:a,robins:n},children:Object(u.jsx)("div",{className:"mt-3",children:Object(u.jsx)(Q.a,{panes:Ne,renderActiveOnly:!1})})})})}},{title:"Add Robin",url:"/dashboard/add-robin",icon:"/icons/add-user.png",Component:function(){var e=[{placeholder:"Address",name:"address",label:"Address",required:!0,rows:3}],t=[{placeholder:"Group",name:"group",label:"Select Group",required:!0}],n=[{type:"text",placeholder:"First Name",name:"firstName",label:"First Name",required:!0},{type:"text",placeholder:"Last Name",name:"lastName",label:"Last Name",required:!0},{type:"email",placeholder:"Email",name:"email",label:"Email Address",required:!0},{type:"password",placeholder:"Password",name:"password",label:"Password",required:!0},{type:"text",placeholder:"Phone",name:"phone",label:"Phone",required:!0},{type:"text",placeholder:"Profession",name:"profession",label:"Profession",required:!0},{type:"date",placeholder:"Date Of Birth",name:"DOB",label:"Date Of Birth",required:!1}],c=Object(r.useState)([]),a=Object(j.a)(c,2),i=a[0],s=a[1];Object(r.useEffect)((function(){A().then((function(e){s(e)}))}),[]);var o=Object(r.useState)({firstName:"",lastName:"",email:"",phone:"",profession:"",DOB:"2000-01-02",address:"",group:"-1",password:""}),d=Object(j.a)(o,2),b=d[0],O=d[1],h=Object(r.useState)({show:!1,body:"Please Add",title:"Message"}),x=Object(j.a)(h,2),v=x[0],m=x[1];var p=function(){var e=b.firstName,t=b.lastName,n=b.email,c=b.group;console.log({group:c});var a="";return e.length<5?a="First Name must be 5 or more character long.":t.length<2?a="First Name must be 2 or more character long.":!function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(n)?a="Invalid Email":"-1"===c&&(console.log({group:"invalid"}),a="Please Select A Group"),!a||(S({show:!0,isError:!0,body:a,title:"Error"}),!1)},g=function(e){var t=e.target,n=t.name,c=t.value;console.log(n,c),console.log(b),O(Object(l.a)(Object(l.a)({},b),{},Object($.a)({},n,c)))},S=function(e){m(Object(l.a)(Object(l.a)({},v),e))};return Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)(B,{title:v.title,show:v.show,isError:v.isError,onOk:function(){return S({show:!1})},children:Object(u.jsx)("p",{children:v.body})}),Object(u.jsx)("div",{className:"container p-4",children:Object(u.jsx)("div",{className:"mt-4",children:Object(u.jsx)("div",{className:"col-lg-6 mx-auto border p-4 shadow shadow-sm rounded",children:Object(u.jsxs)("div",{className:"",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"display-6",children:"Add A Robin"}),Object(u.jsx)(f.a,{})]}),Object(u.jsxs)(K.a,{onSubmit:function(e){var t;(e.preventDefault(),p())&&(t=b,w.axios.post("/api/robins",t)).then((function(e){var t=e.data.robin,n={};for(var c in b)n[c]="";O(Object(l.a)({},n)),m(Object(l.a)(Object(l.a)({},v),{},{show:!0,isError:!1,title:"Success",body:"".concat(t.firstName," Created SuccessFuly.")}))}))},children:[function(){var c=n.map((function(e,t){var n=e.type,c=e.placeholder,a=e.name,r=e.required,i=e.label;return Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:i}),Object(u.jsx)("input",{required:r,placeholder:c,onChange:g,type:n,value:b[a],name:a})]},t)})),a=e.map((function(e,t){var n=e.label,c=e.required,a=e.name,r=e.placeholder,i=e.rows;return Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:n}),Object(u.jsx)("textarea",{required:c,placeholder:r,onChange:g,name:a,rows:i,value:b[a]})]},"textarea-".concat(t))})),r=t.map((function(e,t){var n=e.label,c=e.name,a=(e.options,e.placeholder),r=e.required;return Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:n}),Object(u.jsxs)("select",{required:r,placeholder:a,onChange:g,name:c,children:[Object(u.jsx)("option",{value:"-1",children:"Select Group"},-1),i.map((function(e,t){var n=e.title,c=e._id;return Object(u.jsx)("option",{value:c,children:n},t)}))]})]},1e4*Math.random())}));return[].concat(Object(E.a)(c),Object(E.a)(a),Object(E.a)(r))}(),Object(u.jsx)("br",{}),Object(u.jsx)(P,{type:"submit",children:"Save Robin"})]})]})})})})]})}},{title:"All Robins",url:"/dashboard/all-robins",icon:"/icons/list.png",Component:function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)("table"),i=Object(j.a)(a,2),s=i[0],o=i[1],d=Object(r.useState)([]),b=Object(j.a)(d,2),O=b[0],h=b[1],x=Object(r.useState)([]),v=Object(j.a)(x,2),m=v[0],p=v[1],g=Object(r.useState)({show:!1}),S=Object(j.a)(g,2),N=S[0],C=S[1],D=Object(r.useState)({body:"Done",show:!1,title:"Message"}),y=Object(j.a)(D,2),F=y[0],_=y[1],T=Object(r.useState)({show:!1,title:"Deleting Robin",positiveAction:"Delete",negativeActionHandler:function(){return R(Object(l.a)(Object(l.a)({},H),{},{show:!1}))}}),I=Object(j.a)(T,2),H=I[0],R=I[1],P=Object(r.useState)({event:{},data:{}}),q=Object(j.a)(P,2),U=q[0],W=q[1],z=Object(r.useState)([{value:"",text:"Select An Option"},{value:"select-all",text:"Select All"},{value:"unselect-all",text:"Unselected All"},{value:"make-selected-admin",text:"Make Selected Admin"},{value:"make-selected-volunteer",text:"Make Selected Volunteer"},{value:"delete-selected",text:"Delete"}].map((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{key:t})}))),V=Object(j.a)(z,2),J=V[0],$=V[1];Object(r.useEffect)((function(){L().then((function(e){e=e.map((function(e){return{selected:!1,robin:e}})),c(e),console.log(e)}))}),[]),Object(r.useEffect)((function(){A().then((function(e){console.log(e),h(e);var t=e.map((function(e,t){return{key:e._id+t,text:"Move To ".concat(e.title),value:"move-to-group-".concat(e._id)}}));$([].concat(Object(E.a)(J),Object(E.a)(t)))}))}),[]);function K(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=n.map((function(t){return Object(l.a)(Object(l.a)({},t),{},{selected:e})}));c(t),p(e?Object(E.a)(t.map((function(e){return e.robin}))):[])}function Q(){var e=m.map((function(e){return e._id}));(function(e){return console.log(e),w.axios.delete("/api/robins/bulk",{data:{robins:e}}).then((function(e){return e.data}))})(e).then((function(t){p([]);var a=Object(E.a)(n);e.forEach((function(e){var t=a.findIndex((function(t){return t.robin._id===e}));a.splice(t,1)})),c(Object(E.a)(a)),R(Object(l.a)(Object(l.a)({},H),{},{show:!1})),_(Object(l.a)(Object(l.a)({},F),{},{show:!0,body:"".concat(e.length," Robins Deleted."),title:"Deletion Success"}))}))}var X=function(){R(Object(l.a)(Object(l.a)({},H),{},{show:!0,title:"Bulk Delete",body:Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:["Do you really want to delete ",m.length," Robins."]}),Object(u.jsx)("p",{color:"red",children:"You cant undo after delete!!"})]}),positiveActionHandler:function(){Q()}}))},ee=function(){var e=m.map((function(e){return e._id})),t=Object(E.a)(n);(function(e){return w.axios.post("/api/robins/bulk/change/type/admin",{robins:e}).then((function(e){return e.data}))})(e).then((function(n){t.forEach((function(t){var n=t.robin;e.includes(n._id)&&(n.type="ADMIN")})),c(t),_(Object(l.a)(Object(l.a)({},F),{},{show:!0,isError:!1,body:"".concat(e.length," Are changed to Admin."),title:"Operation Success"}))}))},te=function(){var e=m.map((function(e){return e._id})),t=Object(E.a)(n);(function(e){return w.axios.post("/api/robins/bulk/change/type/volunteer",{robins:e}).then((function(e){return e.data}))})(e).then((function(n){t.forEach((function(t){var n=t.robin;e.includes(n._id)&&(n.type="VOLUNTEER")})),c(t),_(Object(l.a)(Object(l.a)({},F),{},{show:!0,isError:!1,body:"".concat(e.length," Are changed to Volunteer."),title:"Operation Success"}))}))},ne=function(e){console.log("Moving ",n.length,"Robins to ",e);var t=m.map((function(e){return e._id}));(function(e,t){return console.log({group:e,ids:t}),w.axios.post("/api/robins/bulk/move/group/",{robins:t,group:e}).then((function(e){return e.data}))})(e._id,t).then((function(a){var r=Object(E.a)(n);console.log(t),r.forEach((function(n){var c=n.robin;t.includes(c._id)&&(console.log("found.."),c.group=e)})),c(r)}))};return Object(u.jsx)(Z.Provider,{value:n,children:Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)(G,Object(l.a)(Object(l.a)({},N),{},{onHide:function(){C(Object(l.a)(Object(l.a)({},N),{},{show:!1}))}})),Object(u.jsx)(k,Object(l.a)(Object(l.a)({},H),{},{children:H.body})),Object(u.jsx)(B,Object(l.a)(Object(l.a)({},F),{},{onOk:function(){return _(Object(l.a)(Object(l.a)({},F),{},{show:!1}))},children:F.body})),Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsxs)("div",{className:"mt-3 mx-auto",children:[Object(u.jsx)("div",{children:Object(u.jsx)("h1",{className:"display-5",children:"All Robins"})}),Object(u.jsx)(f.a,{}),Object(u.jsx)(M,{onBulkOptionChange:function(e,t){console.log({event:e,data:t}),W({event:e,data:t})},bulkOptions:J,onViewChange:o,performBulkAction:function(){U.event;var e=U.data,t=Object(l.a)({"select-all":function(){return K(!0)},"unselect-all":function(){return K(!1)},"delete-selected":X,"make-selected-admin":ee,"make-selected-volunteer":te},O.reduce((function(e,t){return e["move-to-group-".concat(t._id)]=function(){return ne(t)},e}),{}));e&&(t[e.value]&&t[e.value](),console.log("Performing ",e.value,"On ",m.length,"Robins"))},onShowFilterModal:function(){C(Object(l.a)(Object(l.a)({},N),{},{show:!0})),console.log("Hide Filter")}})]}),Object(u.jsx)("div",{className:"mt-4",children:Object(u.jsx)(Y,{onClick:function(e){console.log(e)},onSelect:function(e){console.log("Robin Selected",e);var t=Object(E.a)(n),a=t[e];a.selected=!a.selected,c(t);var r=Object(E.a)(m);if(a.selected)p([].concat(Object(E.a)(r),[a.robin]));else{var i=m.findIndex((function(e){return e._id===a.robin._id}));r.splice(i,1),p(Object(E.a)(r))}},view:s})})]})]})})}},{title:"Add Drives",url:"/dashboard/add-drive",icon:"/icons/d.png",Component:function(){var e=Object(r.useContext)(Te),t=e.setDrives,n=e.drives,c=Object(r.useState)({drive:""}),a=Object(j.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)({show:!1,body:"Please Add",title:"Message"}),d=Object(j.a)(o,2),b=d[0],O=d[1],h=function(){if(i.drive&&!(i.drive.trim().length<2))return!0;m({show:!0,isError:!0,body:"Drive must be more then 2 character long.",title:"Error"})},x=function(e){t([].concat(Object(E.a)(n),[e])),m({show:!0,isError:!1,body:Object(u.jsxs)("p",{children:[e.drive," Saved sucessfully"]}),title:"Drive Saved!"}),s({drive:""})},v=function(e){return m({show:!0,isError:!0,body:e,title:"Error"})},m=function(e){O(Object(l.a)(Object(l.a)({},b),e))},p=i.drive;return Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)(B,{title:b.title,show:b.show,isError:b.isError,onOk:function(){return m({show:!1})},children:Object(u.jsx)("p",{children:b.body})}),Object(u.jsx)("div",{className:"conatiner p-4",children:Object(u.jsx)("div",{className:"mt-4",children:Object(u.jsx)("div",{className:"col-lg-6 mx-auto border p-4 shadow shadow-sm rounded",children:Object(u.jsxs)("div",{className:"",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("p",{className:"display-6",children:"Add New Drive"}),Object(u.jsx)(f.a,{})]}),Object(u.jsxs)(K.a,{onSubmit:function(e){var t;(e.preventDefault(),h())&&(t=i,w.axios.post("/api/drives",t)).then((function(e){return x(e.data.drive)})).catch((function(e){var t;return console.log({error:e}),v(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data.message)}))},children:[Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:"Drive Title"}),Object(u.jsx)("input",{required:!0,placeholder:"Title",onChange:function(e){var t=e.target,n=t.name,c=t.value;s(Object($.a)({},n,c))},value:p,name:"drive"})]}),Object(u.jsx)("br",{}),Object(u.jsx)(P,{type:"submit",children:"Save Drive"})]})]})})})})]})}},{title:"All Drives",url:"/dashboard/all-drives",icon:"/icons/list.png",Component:function(){var e=Object(r.useContext)(Te),t=e.drives,n=e.setDrives,c=Object(r.useState)(!1),a=Object(j.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)(null),l=Object(j.a)(o,2),d=l[0],b=l[1],O=function(){var e;console.log("We are deleting",d),(e=d.slug,w.axios.delete("/api/drives/".concat(e))).then((function(e){console.log(e),s(!1);var c=t.filter((function(e){return e._id!==d._id}));n(c)}))};return Object(u.jsxs)("div",{className:"conatiner mt-4",children:[Object(u.jsxs)("div",{className:"col-lg-8 mx-auto",children:[Object(u.jsxs)("div",{className:"col-lg-12 mx-auto",children:[Object(u.jsx)("h1",{className:"display-6",children:"All Drives"}),Object(u.jsx)(f.a,{})]}),Object(u.jsxs)(N.a,{celled:!0,children:[Object(u.jsx)(N.a.Header,{children:Object(u.jsxs)(N.a.Row,{children:[Object(u.jsx)(N.a.HeaderCell,{children:"Sno."}),Object(u.jsx)(N.a.HeaderCell,{children:"Drive Title"}),Object(u.jsx)(N.a.HeaderCell,{children:"Created At"}),Object(u.jsx)(N.a.HeaderCell,{children:"Created By"}),Object(u.jsx)(N.a.HeaderCell,{children:"Actions"})]})}),Object(u.jsx)(N.a.Body,{children:t.map((function(e,t){return Object(u.jsxs)(N.a.Row,{children:[Object(u.jsx)(N.a.Cell,{children:t+1}),Object(u.jsx)(N.a.Cell,{children:Object(u.jsx)("h4",{children:e.drive})}),Object(u.jsx)(N.a.Cell,{children:e.createdAt?Object(u.jsxs)(r.Fragment,{children:[new Date(e.createdAt).toLocaleDateString()," ",new Date(e.createdAt).toLocaleTimeString()]}):"Not-Available"}),Object(u.jsx)(N.a.Cell,{children:e.createdBy||"Not-Available"}),Object(u.jsx)(N.a.Cell,{children:Object(u.jsx)(C.a,{onClick:function(){return function(e){b(e),s(!0)}(e)},size:"mini",color:"red",children:"Delete"})})]},t)}))})]})]}),d&&Object(u.jsx)(k,{title:"Confirm Deletion",show:i,positiveAction:"Yes",positiveActionHandler:function(){O()},negativeAction:"No",negativeActionHandler:function(){s(!1)},children:Object(u.jsxs)("p",{children:["Do you really want to delete ",Object(u.jsx)("b",{children:d.drive})," Drive"]})})]})}},{title:"Groups",url:"/dashboard/groups",icon:"/icons/crowd.png",Component:function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){A().then((function(e){c(e)}))}),[]);var a=Object(r.useState)(null),i=Object(j.a)(a,2),s=i[0],o=i[1],d=Object(r.useState)({show:!1,title:"Delete Group",positiveAction:"Yes",negativeAction:"Cancel"}),b=Object(j.a)(d,2),O=b[0],h=b[1],x=function(e){o(e),h(Object(l.a)(Object(l.a)({},O),{},{show:!0}))},v=[{menuItem:"All Groups",render:function(){return Object(u.jsx)(Q.a.Pane,{children:Object(u.jsx)(ee,{groups:n,onDelete:x})})}},{menuItem:"Add Group",render:function(){return Object(u.jsx)(Q.a.Pane,{children:Object(u.jsx)(te,{})})}}];return Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)(k,Object(l.a)(Object(l.a)({},O),{},{positiveActionHandler:function(){var e;console.log("Dleeting ",s),console.error("Deletion is Pending..."),(e=s._id,w.axios.delete("/api/groups/".concat(e))).then((function(){var e=n.findIndex((function(e){return e._id===s._id})),t=Object(E.a)(n);t.splice(e,1),c(t),h(Object(l.a)(Object(l.a)({},O),{},{show:!1}))})).catch((function(e){throw h(Object(l.a)(Object(l.a)({},O),{},{show:!1})),new Error(e)}))},negativeActionHandler:function(){return h(Object(l.a)(Object(l.a)({},O),{},{show:!1}))},children:"Do You Really Want To Delete The Group?"})),Object(u.jsx)("div",{className:"container mt-3",children:Object(u.jsx)(Q.a,{panes:v})})]})}},{title:"Export",url:"/dashboard/export",icon:"/icons/excel.png",Component:function(){var e=Object(r.useState)([{title:"Robins",function:function(){w.axios.get("/api/reports/robins").then((function(e){return e.data&&e.data.robins})).then((function(e){a("robins",e.map((function(e){var t=Object(l.a)({},e);return t.group=e.group?e.group.title:"No-group",t.DOB=new Date(e.DOB).toDateString(),t})))}))},data:[]},{title:"Groups",function:function(){w.axios.get("/api/reports/groups/").then((function(e){return e.data&&e.data.groups})).then((function(e){a("groups",e)}))},data:[]},{title:"Drives",function:function(){w.axios.get("/api/reports/drives").then((function(e){return e.data&&e.data.drives})).then((function(e){a("drives",e)}))},data:[]},{title:"Events",function:function(){w.axios.get("/api/reports/events/").then((function(e){return e.data&&e.data.events})).then((function(e){a("events",e)}))},data:[]}]),t=Object(j.a)(e,2),n=t[0],c=t[1];function a(e,t){var a=Object(E.a)(n);a.find((function(t){return t.title.toLowerCase()===e})).data=t,c(a)}return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("br",{}),Object(u.jsx)("div",{children:Object(u.jsx)("h1",{className:"display-5",children:"Export Data"})}),Object(u.jsx)("hr",{}),Object(u.jsx)("div",{children:Object(u.jsxs)("table",{className:"table table-hover table-striped table-bordered ",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"#"}),Object(u.jsx)("th",{children:"Report Of"}),Object(u.jsx)("th",{children:"Action"})]})}),Object(u.jsx)("tbody",{children:n.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t+1}),Object(u.jsx)("td",{children:e.title}),Object(u.jsxs)("td",{children:[Object(u.jsx)(C.a,{onClick:e.function,size:"mini",color:"green",children:"Export"}),e.data.length?Object(u.jsx)(xe.CSVLink,{filename:"".concat(e.title,"-").concat((new Date).toDateString(),".csv"),target:"_blank",data:e.data,children:Object(u.jsx)(C.a,{size:"mini",color:"green",children:"Download"})}):null]})]},"tr-".concat(t))}))})]})})]})}}],Ne=[{menuItem:"Attendance",pane:Object(u.jsx)(S.a,{children:Object(u.jsx)(Oe,{})},"1")},{menuItem:"Drives",pane:Object(u.jsx)(S.a,{children:Object(u.jsx)(he,{})},"2")}],Ce=function(e){var t=Object(b.g)(),n=Object(b.i)().path;return Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsxs)(b.d,{children:[Se.map((function(e,t){var n=e.url,c=e.Component;return Object(u.jsx)(b.b,{path:n,children:Object(u.jsx)(c,{})},t)})),Object(u.jsx)(b.b,{path:n,exact:!0,children:Object(u.jsx)(g,{onCardClick:function(e){t.push(e)},dashBoardCardOptions:Se})})]}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{})]})},we=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){ae().then((function(e){console.log(JSON.stringify(e[0],null,4)),c(e.map((function(e,t){e.image="/images/thumbnail-".concat((t+2)%3,".png");var n=new Date(e.date);e.date=n.toDateString();var c=new Date;n.getDate()===c.getDate()&&(e.date+=" (Today)"),n.getDate()===c.getDate()+1&&(e.date+=" (Tomorrow)");var a=e.createdBy,r=a.firstName,i=a.lastName;return e.createdBy="".concat(r," ").concat(i),e.time=new Date(0,0,0,e.time.hr,e.time.min).toLocaleString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),e})))}))}),[]),Object(u.jsxs)(r.Fragment,{children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("span",{className:"display-5",children:["Upcoming Drives ",Object(u.jsx)(X.a,{name:"clock",color:"black"})]}),Object(u.jsx)(f.a,{})]}),Object(u.jsx)("div",{className:"row",children:n.map((function(e,t){return Object(u.jsx)("div",{className:"mt-4 col-12 col-lg-6",children:Object(u.jsxs)(x.a,{fluid:!0,children:[Object(u.jsx)(v.a,{src:e.image,wrapped:!0,ui:!1}),Object(u.jsxs)(x.a.Content,{children:[Object(u.jsxs)(x.a.Header,{children:[Object(u.jsx)("h3",{className:"m-0",children:e.date}),Object(u.jsx)("h4",{className:"mt-2",children:e.time})]}),Object(u.jsx)(x.a.Meta,{children:Object(u.jsxs)("span",{className:"date",children:["Created By ",e.createdBy]})}),Object(u.jsxs)(x.a.Description,{children:["Location: ",e.location]})]}),Object(u.jsx)(x.a.Content,{extra:!0,hidden:!0,children:Object(u.jsxs)("a",{children:[Object(u.jsx)(X.a,{name:"user"}),"22 Friends"]})})]})},t)}))})]})},De=function(){return Object(u.jsxs)("div",{className:"col-lg-8 col-md-10 col-sm-8 col-11 mx-auto",children:[Object(u.jsx)("br",{}),Object(u.jsx)(we,{}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{})]})},ye=n(53),ke=function(e){var t=Object(b.g)(),n=Object(r.useContext)(_e).onLogin,c=Object(r.useState)({email:"",password:""}),a=Object(j.a)(c,2),i=a[0],s=a[1],o=Object(r.useState)({show:!1}),d=Object(j.a)(o,2),O=d[0],h=d[1],x=function(e){var t=e.target,n=t.name,c=t.value;s(Object(l.a)(Object(l.a)({},i),{},Object($.a)({},n,c)))},v=i.email,p=i.password;return Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)(B,{show:O.show,title:O.title,isError:O.isError,onOk:function(){return h(Object(l.a)(Object(l.a)({},O),{},{show:!1}))},children:O.body}),Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("div",{className:"col-lg-4 col-md-7 mx-auto mt-4",children:Object(u.jsxs)("div",{className:" border p-4 rounded mt-4 p-4",children:[Object(u.jsx)(m.a,{as:"h1",children:"Login Here"}),Object(u.jsx)(f.a,{}),Object(u.jsxs)(K.a,{onSubmit:function(e){e.preventDefault(),function(e){var t=e.email,n=e.password;return console.log({email:t,password:n}),w.axios.post("/api/robins/login",{email:t,password:n})}(Object(l.a)({},i)).then((function(e){var c=e.data,a=c.token,r=c.type;Object(ye.saveToken)({token:a,type:r}),t.push("/dashboard"),n()}))},children:[Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:"Email Address"}),Object(u.jsx)("input",{required:!0,placeholder:"Email Address",onChange:x,value:v,name:"email"})]}),Object(u.jsxs)(K.a.Field,{children:[Object(u.jsx)("label",{children:"Password"}),Object(u.jsx)("input",{required:!0,placeholder:"Password",onChange:x,name:"password",type:"password",value:p})]}),Object(u.jsx)("br",{}),Object(u.jsx)(P,{type:"submit",children:"Login"})]})]})})})]})},Ee=function(e){return Object(u.jsx)("h1",{children:"Register page "})},Ae=n(172),Fe=function(e){var t=Object(b.h)(),n=e.onlyFor;if(Object(ye.getToken)()){var c=Object(ye.getDecodedToken)();if(c){var a=c.type;if(n&&a.toLowerCase()===n.toLowerCase())return Object(u.jsx)(b.b,Object(l.a)(Object(l.a)({},e),{},{children:e.children}));if(!n)return Object(u.jsx)(b.b,Object(l.a)(Object(l.a)({},e),{},{children:e.children}))}}return Object(u.jsx)(b.a,{to:{pathname:"/login",search:"?returnUrl=".concat(t.pathname)}})},_e=(n(163),i.a.createContext()),Te=i.a.createContext();var Ie=function(){var e=Object(r.useState)({onLogin:function(){c(Object(l.a)(Object(l.a)({},n),{},{loggedInUser:Object(ye.getDecodedToken)()}))},onLogout:function(){c(Object(l.a)(Object(l.a)({},n),{},{loggedInUser:null}))},loggedInUser:!1}),t=Object(j.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),i=Object(j.a)(a,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){var e=Object(ye.getDecodedToken)();c(Object(l.a)(Object(l.a)({},n),{},{loggedInUser:e}))}),[]),Object(r.useEffect)((function(){D().then((function(e){o(e)}))}),[]),Object(u.jsx)(Te.Provider,{value:{drives:s,setDrives:o},children:Object(u.jsx)(_e.Provider,{value:n,children:Object(u.jsxs)(d.a,{children:[Object(u.jsx)(h,{}),Object(u.jsxs)(b.d,{children:[Object(u.jsx)(b.b,{path:"/login",children:Object(u.jsx)(ke,{})}),Object(u.jsx)(b.b,{path:"/register",children:Object(u.jsx)(Ee,{})}),Object(u.jsx)(Fe,{path:"/dashboard",onlyFor:"admin",children:Object(u.jsx)(Ce,{})}),Object(u.jsx)(b.b,{path:"/",children:Object(u.jsx)(De,{})})]})]})})})},He=n(93),Re=n(94),Le=n(153),Pe=n(146),Be=function(e){Object(Le.a)(n,e);var t=Object(Pe.a)(n);function n(){var e;Object(He.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1,error:""},e.componentDidCatch=function(t,n){e.setState({error:n,hasError:!0})},e}return Object(Re.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.responseInterceptorId=w.axios.interceptors.response.use(null,(function(t){var n=(t?t.response:{message:"Internal Server Error"}).data;return n?e.setState({error:n.message,hasError:!0}):e.setState({error:"Something Went Wrong.",hasError:!0}),Promise.reject(t)}))}},{key:"componentWillUnmount",value:function(){w.axios.interceptors.response.eject(this.responseInterceptorId)}},{key:"render",value:function(){var e=this,t=this.state,n=t.hasError,c=t.error,a=this.props.children;return console.log({hasError:n,children:a}),Object(u.jsxs)(r.Fragment,{children:[Object(u.jsx)(B,{isError:!0,onOk:function(){e.setState({hasError:!1})},show:n,children:c}),a]})}}]),n}(i.a.Component);Be.getDerivedStateFromError=function(e){return{hasError:!0}};n(325);var qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,463)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},Me=n(177),Ge=n.n(Me);a.a.config({});var Ue=[];["false",!1].includes("true")&&Ue.push(new Ge.a.transports.Console);var We=Ge.a.createLogger({transports:Ue});o.a.render(Object(u.jsx)(Ae.WinstonProvider,{logger:We,children:Object(u.jsx)(Be,{children:Object(u.jsx)(Ie,{})})}),document.getElementById("root")),qe()},53:function(e,t,n){"use strict";n.r(t),n.d(t,"getToken",(function(){return r})),n.d(t,"saveToken",(function(){return a})),n.d(t,"getDecodedToken",(function(){return i}));var c=n(245),a=function(e){var t=e.token,n=e.type;localStorage.setItem("token",JSON.stringify({token:t,type:n}))},r=function(){var e=localStorage.getItem("token");return e?"".concat(JSON.parse(e).type," ").concat(JSON.parse(e).token):null},i=function(){try{var e=r();if(e)return Object(c.a)(e)}catch(t){return null}}}},[[432,1,2]]]);
//# sourceMappingURL=main.bb16cc99.chunk.js.map